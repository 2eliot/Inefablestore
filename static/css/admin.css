/* Packages list as vertical list */
.pkg-accordion { display: grid; gap: 12px; grid-template-columns: 1fr; }
.pkg-item { border: 1px solid #e2e8f0; border-radius: 10px; background: #fff; overflow: hidden; }
.pkg-header { background: #f8fafc; }
.pkg-header .name { line-height: 1.2; word-break: break-word; }
.pkg-header .head-actions .btn { padding: 6px 10px; }
.pkg-content { background: #fff; }

@media (min-width: 900px) {
  .pkg-accordion { grid-template-columns: 1fr 1fr; }
}

/* Ensure actions visible on mobile */
@media (max-width: 700px) {
  .pkg-accordion { display: block; }
  .pkg-item { display: block; width: 100%; margin-bottom: 12px; }
  .pkg-header { grid-template-columns: 1fr; gap: 8px; align-items: start; }
  .pkg-header .mini-thumb { margin-bottom: 6px; display: block; }
  .pkg-header .head-actions { display: flex; gap: 8px; flex-wrap: wrap; }
  .pkg-header .head-actions .btn { width: auto; }
}
/* Reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color: #0f172a; background: #f8fafc; }
body { overflow-x: hidden; }

/* Topbar */
.topbar { display: flex; align-items: center; height: 56px; padding: 0 16px; background: #2b2f36; color: white; box-shadow: 0 1px 4px rgba(0,0,0,0.1); }
.topbar .brand { font-weight: 700; letter-spacing: 0.2px; }
.btn-ghost { background: transparent; border: none; color: white; font-size: 20px; cursor: pointer; }

/* Layout */
.container { padding: 16px; }
.admin-layout { display: grid; grid-template-columns: 220px 1fr; gap: 16px; }

/* Sidebar tabs */
.sidebar { background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 8px; height: calc(100vh - 120px); position: sticky; top: 72px; }
.tabs { display: block; }
.tabs .tab { display: block; width: 100%; margin: 6px 0; appearance: none; border: 1px solid transparent; background: transparent; text-align: left; padding: 10px 12px; border-radius: 6px; color: #0f172a; cursor: pointer; font-weight: 600; }
.tabs .tab:hover { background: #f1f5f9; }
.tabs .tab.active { background: #d1fae5; border-color: #a7f3d0; color: #065f46; }

/* Content */
.order-card {
  background: rgba(3,7,18,0.6);
  border: 1px solid rgba(148,163,184,0.22);
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 10px 28px rgba(0,0,0,0.25);
  margin-bottom: 16px;
}
.order-head { display:flex; align-items:center; justify-content: space-between; gap:10px; margin-bottom:8px; }
.order-id { font-weight: 900; color:#e2e8f0; }
.order-meta { display:flex; flex-wrap:wrap; gap:8px; color:#94a3b8; font-size:12px; }
.order-body { display:grid; gap:8px; padding-top:6px; border-top:1px dashed rgba(148,163,184,0.25); }
.kv { display:grid; grid-template-columns: 120px 1fr; gap:8px; align-items:center; }
.kv .k { color:#a7f3d0; font-weight:800; font-size:12px; }
.kv .v { color:#e2e8f0; font-weight:700; word-break: break-word; }
.badge { display:inline-block; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:800; }
.badge.pending { background:#f59e0b22; color:#f59e0b; border:1px solid #f59e0b55; }
.badge.approved { background:#10b98122; color:#10b981; border:1px solid #10b98155; }
.badge.rejected { background:#ef444422; color:#ef4444; border:1px solid #ef444455; }
.chips { display:flex; flex-wrap:wrap; gap:8px; margin: 6px 0; }
.chip { background: rgba(15,23,42,0.65); color:#cbd5e1; border:1px solid rgba(148,163,184,0.28); border-radius: 10px; padding:6px 10px; font-size:12px; }
.order-actions { display:flex; gap:8px; margin-top:8px; }
.admin-drawer { position: fixed; inset: 0; z-index: 80; }
.admin-drawer .drawer-backdrop { position: absolute; inset: 0; background: rgba(2,6,23,0.5); backdrop-filter: blur(2px); }
.admin-drawer .drawer-panel { position: absolute; top: 0; bottom: 0; left: 0; width: 78vw; max-width: 320px; background: #ffffff; border-right: 1px solid #e2e8f0; box-shadow: 6px 0 24px rgba(0,0,0,0.2); transform: translateX(-100%); transition: transform 200ms ease; padding: 10px; }
.admin-drawer:not([hidden]) .drawer-panel { transform: translateX(0); }

@media (max-width: 900px) {
  .container { padding: 10px; }
  .admin-layout { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .panel-header { padding: 12px; }
  .panel-body { padding: 12px; }
  .tab { padding: 8px 10px; font-size: 14px; }
  .btn { padding: 6px 10px; font-size: 14px; }
  .btn.primary { padding: 6px 10px; }
}

/* Show hamburger */
#admin-hamburger { display: inline-block !important; }
/* Forms single column */
.form-row { grid-template-columns: 1fr; }
.form-row label { margin-bottom: 4px; }

@media (max-width: 700px) {
  /* Force admin tabs to vertical list on small screens */
  #adminTabs { display:block; }
  #adminTabs .tab { display:block; width:100%; margin: 6px 0; }
  .image-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .image-card .thumb { height: 140px; }
}

@media (max-width: 600px) {
  .topbar { height: 50px; padding: 0 12px; }
  .topbar .brand { font-size: 14px; }
  .container { padding: 8px; }
  .panel-header { padding: 10px; }
  .panel-body { padding: 10px; }
  .btn { padding: 5px 9px; font-size: 13px; }
  .image-grid { grid-template-columns: 1fr; }
  .image-card .thumb { height: 120px; }
  /* Taller modal on phones with scrollable body */
  .modal-dialog { margin: 6vh auto; max-height: 88vh; }
  .modal-body { max-height: calc(88vh - 64px); }
}
.btn + .btn { margin-left: 8px; }
.btn:disabled { cursor: not-allowed; opacity: 0.6; }

/* Empty state */
.empty-state h3 { margin-top: 0; margin-bottom: 8px; color: #0f172a; }

/* Forms */
.form-row { display: grid; grid-template-columns: 1fr; gap: 12px; align-items: center; margin-bottom: 12px; }
.form-row label { color: #334155; font-weight: 600; }
.config-form input, .config-form select { padding: 8px 10px; border: 1px solid #cbd5e1; border-radius: 6px; background: #f8fafc; }

/* Image grid */
.image-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
.image-card { border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden; background: #fff; display: grid; grid-template-rows: auto 1fr; }
.image-card .thumb-wrap { position: relative; }
.image-card .thumb { width: 100%; height: 160px; object-fit: cover; display: block; }
.image-card .btn-del-ov { position: absolute; top: 6px; right: 6px; z-index: 5; border: none; border-radius: 999px; background: rgba(239,68,68,0.9); color: #fff; font-weight: 800; width: 28px; height: 28px; line-height: 28px; text-align: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.25); }
.image-card .btn-del-ov:hover { background: #ef4444; }
.image-card .btn-del-ov:active { transform: translateY(1px); }
.image-card .badge { position: absolute; top: 8px; left: 8px; background: #10b981; color: #fff; font-weight: 700; font-size: 12px; padding: 4px 8px; border-radius: 999px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
.image-card .badge.gift { background: #10b981; }
.pkg-header { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px; padding: 10px; }
.pkg-header .mini-thumb { width: 64px; height: 64px; object-fit: cover; border-radius: 6px; border: 1px solid #e2e8f0; }
.pkg-header .name { font-weight: 800; color: #0f172a; font-size: 16px; line-height: 1.3; word-break: normal; overflow-wrap: break-word; }
.pkg-header .badge { display: inline-block; margin-left: 8px; background: #10b981; color: #fff; font-weight: 700; font-size: 12px; padding: 3px 8px; border-radius: 999px; white-space: nowrap; }
.pkg-header .badge.gift { background: #10b981; }
.pkg-header .small-path { display: block; color: #64748b; font-size: 12px; word-break: break-all; }
.pkg-header .head-actions { display: flex; gap: 8px; }
.pkg-content { display: none; padding: 10px; border-top: 1px dashed #e2e8f0; }
.pkg-item.open .pkg-content { display: grid; gap: 8px; }

/* Mobile: show actions and simplify header layout */
@media (max-width: 700px) {
  .pkg-header { display: block; }
  .pkg-header .mini-thumb { display: none; }
  .pkg-header .name { margin-bottom: 8px; }
  .pkg-header .head-actions { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 6px; }
  .pkg-header .head-actions .btn { padding: 6px 10px; font-size: 12px; }
}

@media (max-width: 600px) {
  .pkg-header { grid-template-columns: 48px 1fr auto; }
  .pkg-header .mini-thumb { width: 48px; height: 48px; }
}

/* Panels */
.tab-panel[hidden] { display: none; }
.tab-panel.active { display: block; }

/* Modal */
.modal[hidden] { display: none; }
.modal { position: fixed; inset: 0; z-index: 50; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(15, 23, 42, 0.5); }
.modal-dialog { position: relative; background: #fff; border-radius: 10px; width: min(900px, 92vw); margin: 8vh auto; border: 1px solid #e2e8f0; box-shadow: 0 10px 30px rgba(0,0,0,0.2); max-height: 84vh; display: flex; flex-direction: column; }
.modal-header { display:flex; align-items:center; justify-content: space-between; padding: 12px 16px; border-bottom:1px solid #e2e8f0; }
.modal-body { padding: 16px; overflow: auto; max-height: calc(84vh - 64px); }

/* Extra compact for phones */
@media (max-width: 600px) {
  .scale-wrap { transform: scale(0.8); transform-origin: top left; width: calc(100% / 0.8); }
}

/* New order tile (white card) - Reorganized layout */
.order-tile {
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 12px 14px;
  box-shadow: 0 6px 16px rgba(15,23,42,0.06);
  margin-bottom: 14px;
}

/* Row head: Left (game + package + quantity) and Right (ID + zone + reference) */
.order-tile .row-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 12px;
}

/* Left box: Game name, package name, quantity, reference */
.order-tile .box-left {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.order-tile .game-name {
  font-weight: 800;
  font-size: 16px;
  color: #0f172a;
  letter-spacing: 0.3px;
}

.order-tile .package-name {
  color: #64748b;
  font-size: 13px;
  font-weight: 600;
}

.order-tile .quantity-label {
  color: #0f172a;
  font-size: 13px;
  font-weight: 600;
  margin-top: 2px;
}

.order-tile .quantity-value {
  color: #10b981;
  font-weight: 800;
}

/* Reference section in left box */
.order-tile .box-left .ref-section {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 6px;
}

.order-tile .box-left .ref-label {
  font-size: 11px;
  font-weight: 700;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.order-tile .box-left .ref-value {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: #0f172a;
  background: #dbeafe;
  border: 1px solid #93c5fd;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 800;
  letter-spacing: 1px;
  width: fit-content;
}

/* State badge (Procesado, Rechazado, Procesando) */
.order-tile .state {
  display: inline-flex;
  align-items: center;
  margin-left: 8px;
  font-size: 12px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 6px;
  letter-spacing: 0.3px;
}
.order-tile .state.ok {
  color: #ffffff;
  background: #10b981;
}
.order-tile .state.pend {
  color: #ffffff;
  background: #f59e0b;
}
.order-tile .state.rej {
  color: #ffffff;
  background: #ef4444;
}

/* Right box: ID + Zone ID in same line */
.order-tile .box-right {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: flex-end;
  min-width: 220px;
}

/* ID section (includes Zone ID in same line) */
.order-tile .id-section {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.order-tile .id-label {
  font-size: 11px;
  font-weight: 700;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.order-tile .hex {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: #0f172a;
  background: #f1f5f9;
  border: 1px solid #e2e8f0;
  padding: 6px 8px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
}

.order-tile .btn-copy {
  background: #6366f1;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  margin-top: 2px;
}
.order-tile .btn-copy:hover { background: #5558e3; }
.order-tile .btn-copy:active { transform: translateY(1px); }

/* Footer row: amount, date, customer */
.order-tile .row-foot {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  color: #64748b;
  font-size: 12px;
  padding-top: 8px;
  border-top: 1px solid #f1f5f9;
}

.order-tile .amount {
  color: #10b981;
  font-weight: 800;
  font-size: 14px;
}

.order-tile .aff-code {
  color: #8b5cf6;
  font-weight: 700;
  font-size: 12px;
  margin-left: 6px;
  background: #f3e8ff;
  border: 1px solid #c4b5fd;
  padding: 2px 6px;
  border-radius: 6px;
}

.order-tile .customer {
  color: #64748b;
  font-weight: 600;
}

/* Action buttons */
.order-tile .row-actions {
  display: flex;
  gap: 8px;
  margin-top: 10px;
}
.order-tile .row-actions .btn {
  padding: 6px 10px;
}

/* Responsive adjustments */
@media (max-width: 700px) {
  /* Keep two-column layout on mobile */
  .order-tile .row-head {
    gap: 10px;
  }
  
  .order-tile .box-left {
    flex: 1;
    min-width: 0;
  }
  
  .order-tile .box-right {
    min-width: 150px;
  }
  
  .order-tile .game-name {
    font-size: 14px;
  }
  
  .order-tile .state {
    font-size: 10px;
    padding: 2px 6px;
    margin-left: 6px;
  }
  
  .order-tile .package-name {
    font-size: 12px;
  }
  
  .order-tile .quantity-label {
    font-size: 12px;
  }
  
  .order-tile .box-left .ref-label {
    font-size: 10px;
  }
  
  .order-tile .box-left .ref-value {
    font-size: 13px;
    padding: 5px 8px;
  }
  
  .order-tile .id-label {
    font-size: 10px;
  }
  
  .order-tile .hex {
    font-size: 11px;
    padding: 5px 6px;
  }
  
  .order-tile .btn-copy {
    font-size: 11px;
    padding: 5px 8px;
  }
  
  .order-tile .row-foot {
    flex-wrap: wrap;
    gap: 8px;
  }
  
  .order-tile .amount {
    font-size: 13px;
  }
  
  .order-tile .aff-code {
    font-size: 11px;
    padding: 1px 4px;
  }
}

/* ==========================
   Admin Dark Theme (scoped)
   Activated when body has class .theme-admin-dark
   ========================== */
body.theme-admin-dark { background: #0b0f14; color: #e5e7eb; }
body.theme-admin-dark .container { background: transparent; color: #e5e7eb; }
body.theme-admin-dark .sidebar { background: #0b1220; border-color: #334155; }
body.theme-admin-dark .tabs .tab { color: #e5e7eb; border-color: transparent; }
body.theme-admin-dark .tabs .tab:hover { background: #111827; }
body.theme-admin-dark .tabs .tab.active { background: #065f46; border-color: #065f46; color: #d1fae5; }
body.theme-admin-dark .panel-header, 
body.theme-admin-dark .panel-body { color: #e5e7eb; }
body.theme-admin-dark h1,
body.theme-admin-dark h2,
body.theme-admin-dark h3,
body.theme-admin-dark h4,
body.theme-admin-dark p,
body.theme-admin-dark label,
body.theme-admin-dark .order-meta,
body.theme-admin-dark .kv .k,
body.theme-admin-dark .kv .v { color: #e5e7eb; }
body.theme-admin-dark .empty-state h3 { color: #e5e7eb; }
/* Cards and tiles */
body.theme-admin-dark .order-tile { background: #0b1220; border-color: #334155; color: #e5e7eb; box-shadow: 0 6px 16px rgba(0,0,0,0.4); }
body.theme-admin-dark .order-tile .package-name { color: #94a3b8; }
body.theme-admin-dark .order-tile .quantity-label { color: #e5e7eb; }
body.theme-admin-dark .order-tile .ref-value { background: #0b1220; border-color: #334155; color: #e5e7eb; }
body.theme-admin-dark .order-tile .hex { background: #0b1220; border-color: #334155; color: #e5e7eb; }
body.theme-admin-dark .order-tile .row-foot { border-top-color: #1f2937; color: #94a3b8; }
/* Image cards */
body.theme-admin-dark .image-card { background: #0b1220; border-color: #334155; }
body.theme-admin-dark .image-card .btn-del-ov { box-shadow: 0 4px 10px rgba(0,0,0,0.45); }
/* Forms */
body.theme-admin-dark .config-form input,
body.theme-admin-dark .config-form select { background: #0b1220; border-color: #334155; color: #e5e7eb; }
/* Modal */
body.theme-admin-dark .modal-dialog { background: #0b1220; border-color: #334155; }
body.theme-admin-dark .modal-header { border-bottom-color: #334155; }
/* Package header name: keep black on white cards */
body.theme-admin-dark .pkg-header .name { color: #0f172a; }
/* Stronger override specifically in Packages tab */
body.theme-admin-dark #tab-packages .pkg-header .name { color: #0b0f14 !important; opacity: 1 !important; }
/* Orders tab: make package titles white */
body.theme-admin-dark #tab-orders .order-tile .game-name,
body.theme-admin-dark #tab-orders .order-tile .package-name { color: #e5e7eb !important; }
