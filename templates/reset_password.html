{% extends 'base.html' %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/store.css', v='4') }}">
{% endblock %}

{% block header %}
<header class="site-header">
  <div class="container">
    <div class="left-actions">
      <a href="/" class="icon-btn" aria-label="Volver" title="Volver">‹</a>
    </div>
    <a href="/" class="brand">
      {% if logo_url %}
        <img src="{{ logo_url }}" alt="{{ site_name|default('InefableStore') }}" class="logo"/>
      {% else %}
        <span class="logo-text">{{ site_name|default('InefableStore') }}</span>
      {% endif %}
    </a>
    <div class="right-actions">
      <div class="header-search" role="search">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input id="header-search" type="search" placeholder="Buscar Juegos" autocomplete="off" />
      </div>
    </div>
  </div>
</header>
{% endblock %}

{% block content %}
<section class="container" style="max-width:720px; margin: 22px auto;">
  <div class="auth-card" style="max-width:720px;">
    <div class="auth-body">
      <div class="auth-title">Recuperar contraseña</div>
      <div class="alert" id="rp-alert" hidden></div>

      <div class="card" style="background: rgba(43,47,54,0.4); border:1px solid rgba(148,163,184,0.1); border-radius:14px; padding:14px;">
        <div style="display:grid; gap:10px;">
          <div>
            <label style="font-weight:800; color:#e5e7eb;">Correo</label>
            <input id="rp-email" class="input" type="email" placeholder="tu@correo.com" autocomplete="email">
          </div>
          <button id="rp-send" class="btn primary full" type="button">Enviar código</button>
          <div style="font-size:12px; color:#94a3b8; text-align:center;">Te enviaremos un código de 6 dígitos. Solo con ese código podrás cambiar la contraseña.</div>
        </div>
      </div>

      <div class="card" style="margin-top:12px; background: rgba(43,47,54,0.4); border:1px solid rgba(148,163,184,0.1); border-radius:14px; padding:14px;">
        <div style="display:grid; gap:10px;">
          <div class="grid" style="grid-template-columns: 1fr 1fr; gap:10px;">
            <div>
              <label style="font-weight:800; color:#e5e7eb;">Código</label>
              <input id="rp-code" class="input" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="123456" autocomplete="one-time-code" maxlength="6">
            </div>
            <div>
              <label style="font-weight:800; color:#e5e7eb;">Nueva contraseña</label>
              <input id="rp-pass" class="input" type="password" placeholder="Nueva contraseña" autocomplete="new-password">
            </div>
          </div>
          <button id="rp-confirm" class="btn primary full" type="button">Cambiar contraseña</button>
          <div style="font-size:12px; color:#94a3b8; text-align:center;">El código expira en 15 minutos.</div>
        </div>
      </div>

      <div style="margin-top:12px; text-align:center;">
        <a href="/" class="link" style="text-decoration: underline; font-weight:800;">Volver al inicio</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/store.js', v='4') }}" defer></script>
<script src="{{ url_for('static', filename='js/reset_password.js', v='1') }}" defer></script>
{% endblock %}
